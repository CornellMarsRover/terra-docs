<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Terra: ArucoAction Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Terra
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classArucoAction-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ArucoAction Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The class <a class="el" href="classArucoAction.html" title="The class ArucoAction contains several methods, functions, and member variables that assist in the ar...">ArucoAction</a> contains several methods, functions, and member variables that assist in the aruco tag detection.  
 <a href="classArucoAction.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="aruco__bt__action_8hpp_source.html">aruco_bt_action.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ArucoAction:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoAction__inherit__graph.png" border="0" usemap="#aArucoAction_inherit__map" alt="Inheritance graph"/></div>
<map name="aArucoAction_inherit__map" id="aArucoAction_inherit__map">
<area shape="rect" title="The class ArucoAction contains several methods, functions, and member variables that assist in the ar..." alt="" coords="30,80,123,107"/>
<area shape="rect" title=" " alt="" coords="5,5,148,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ArucoAction:</div>
<div class="dyncontent">
<div class="center"><img src="classArucoAction__coll__graph.png" border="0" usemap="#aArucoAction_coll__map" alt="Collaboration graph"/></div>
<map name="aArucoAction_coll__map" id="aArucoAction_coll__map">
<area shape="rect" title="The class ArucoAction contains several methods, functions, and member variables that assist in the ar..." alt="" coords="30,80,123,107"/>
<area shape="rect" title=" " alt="" coords="5,5,148,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab5db810b451fee9a557d594d90d58877"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#ab5db810b451fee9a557d594d90d58877">ArucoAction</a> (const std::string &amp;name, const std::string &amp;action_name, const BT::NodeConfiguration &amp;conf)</td></tr>
<tr class="separator:ab5db810b451fee9a557d594d90d58877"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaafd8a974a46150c37e37022fdf39bee"><td class="memItemLeft" align="right" valign="top">BT::NodeStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#aaafd8a974a46150c37e37022fdf39bee">tick</a> () override</td></tr>
<tr class="memdesc:aaafd8a974a46150c37e37022fdf39bee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tick method that spins the node and returns success if there are any AR tags in the vector (meaning one was detected) and failure if there wasn't one detected; posts the latest position to the blackboard that is the average of the similarly located tags in the vector.  <a href="classArucoAction.html#aaafd8a974a46150c37e37022fdf39bee">More...</a><br /></td></tr>
<tr class="separator:aaafd8a974a46150c37e37022fdf39bee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a6c72eda4da63dd501b3be722a5b3774d"><td class="memItemLeft" align="right" valign="top">static BT::PortsList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#a6c72eda4da63dd501b3be722a5b3774d">provided_ports</a> ()</td></tr>
<tr class="separator:a6c72eda4da63dd501b3be722a5b3774d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4bed4cbf7f1427e48d1f235d0c5a5b8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#a4bed4cbf7f1427e48d1f235d0c5a5b8f">topic_callback</a> (const geometry_msgs::msg::PoseArray::SharedPtr msg)</td></tr>
<tr class="memdesc:a4bed4cbf7f1427e48d1f235d0c5a5b8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The callback function loops through the Aruco poses to add each pose to the vector of AR tags.  <a href="classArucoAction.html#a4bed4cbf7f1427e48d1f235d0c5a5b8f">More...</a><br /></td></tr>
<tr class="separator:a4bed4cbf7f1427e48d1f235d0c5a5b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac97e1183a2044e428520caca7d927c5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#ac97e1183a2044e428520caca7d927c5e">transformhelper</a> (const geometry_msgs::msg::PoseArray::SharedPtr msg)</td></tr>
<tr class="memdesc:ac97e1183a2044e428520caca7d927c5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The transformhelper function completes the transform of the initial position coordinates into the necessary reference frame of "map".  <a href="classArucoAction.html#ac97e1183a2044e428520caca7d927c5e">More...</a><br /></td></tr>
<tr class="separator:ac97e1183a2044e428520caca7d927c5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:af2c3004c6903c7a0c2c09a0e58499b65"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; rclcpp::Node &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#af2c3004c6903c7a0c2c09a0e58499b65">m_ros_node</a></td></tr>
<tr class="separator:af2c3004c6903c7a0c2c09a0e58499b65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff11141d3dc44cf01d498b59c8b7a489"><td class="memItemLeft" align="right" valign="top">std::vector&lt; geometry_msgs::msg::Pose &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#aff11141d3dc44cf01d498b59c8b7a489">m_node_vector</a></td></tr>
<tr class="separator:aff11141d3dc44cf01d498b59c8b7a489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef76fd81c3d6df8a3f56d30f98e064c0"><td class="memItemLeft" align="right" valign="top">geometry_msgs::msg::Vector3&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#aef76fd81c3d6df8a3f56d30f98e064c0">m_latest_position_average</a></td></tr>
<tr class="separator:aef76fd81c3d6df8a3f56d30f98e064c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa86d86a97d997a5e2787a840344e727"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; tf2_ros::TransformListener &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#afa86d86a97d997a5e2787a840344e727">m_tf_listener</a></td></tr>
<tr class="separator:afa86d86a97d997a5e2787a840344e727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f1e81a094f144892b1db2afe433ca08"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; tf2_ros::Buffer &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArucoAction.html#a1f1e81a094f144892b1db2afe433ca08">m_tf_buffer</a></td></tr>
<tr class="separator:a1f1e81a094f144892b1db2afe433ca08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >The class <a class="el" href="classArucoAction.html" title="The class ArucoAction contains several methods, functions, and member variables that assist in the ar...">ArucoAction</a> contains several methods, functions, and member variables that assist in the aruco tag detection. </p>
<p >The class listens for messages on /aruco_poses, then makes a list of the poses gathered from the messages and loops through the poses and gets the position of the first pose in the vector and adds it to a separate vector. After this, the rest of the poses are looped through and if their respective coordinates are within 1 of the coordinates of the first pose, it is added to that vector. The coordinates of the poses in the m_position_to_post vector are then averaged to get the coordinate that the rover should circle around. This coordinate is then transformed to the "map" reference frame and the Vector3Stamped position is placed in the blackboaard port ARTag. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab5db810b451fee9a557d594d90d58877" name="ab5db810b451fee9a557d594d90d58877"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5db810b451fee9a557d594d90d58877">&#9670;&nbsp;</a></span>ArucoAction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ArucoAction::ArucoAction </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>action_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BT::NodeConfiguration &amp;&#160;</td>
          <td class="paramname"><em>conf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6c72eda4da63dd501b3be722a5b3774d" name="a6c72eda4da63dd501b3be722a5b3774d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c72eda4da63dd501b3be722a5b3774d">&#9670;&nbsp;</a></span>provided_ports()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BT::PortsList ArucoAction::provided_ports </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aaafd8a974a46150c37e37022fdf39bee" name="aaafd8a974a46150c37e37022fdf39bee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaafd8a974a46150c37e37022fdf39bee">&#9670;&nbsp;</a></span>tick()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BT::NodeStatus ArucoAction::tick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tick method that spins the node and returns success if there are any AR tags in the vector (meaning one was detected) and failure if there wasn't one detected; posts the latest position to the blackboard that is the average of the similarly located tags in the vector. </p>

</div>
</div>
<a id="a4bed4cbf7f1427e48d1f235d0c5a5b8f" name="a4bed4cbf7f1427e48d1f235d0c5a5b8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bed4cbf7f1427e48d1f235d0c5a5b8f">&#9670;&nbsp;</a></span>topic_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ArucoAction::topic_callback </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::PoseArray::SharedPtr&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The callback function loops through the Aruco poses to add each pose to the vector of AR tags. </p>
<p >It then averages the coordinates of the closest tags to get the position that the rover should circle around. It then calls the transform helper function to transform the calculated coordinates into the correct reference frame. </p>

</div>
</div>
<a id="ac97e1183a2044e428520caca7d927c5e" name="ac97e1183a2044e428520caca7d927c5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac97e1183a2044e428520caca7d927c5e">&#9670;&nbsp;</a></span>transformhelper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ArucoAction::transformhelper </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::PoseArray::SharedPtr&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The transformhelper function completes the transform of the initial position coordinates into the necessary reference frame of "map". </p>
<p >It uses the msg argument to do the transform. The function is then called in the topic_callback function to be ran there and to then post the final position in the correct reference frame to the blackboard. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aef76fd81c3d6df8a3f56d30f98e064c0" name="aef76fd81c3d6df8a3f56d30f98e064c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef76fd81c3d6df8a3f56d30f98e064c0">&#9670;&nbsp;</a></span>m_latest_position_average</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">geometry_msgs::msg::Vector3 ArucoAction::m_latest_position_average</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aff11141d3dc44cf01d498b59c8b7a489" name="aff11141d3dc44cf01d498b59c8b7a489"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff11141d3dc44cf01d498b59c8b7a489">&#9670;&nbsp;</a></span>m_node_vector</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;geometry_msgs::msg::Pose&gt; ArucoAction::m_node_vector</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af2c3004c6903c7a0c2c09a0e58499b65" name="af2c3004c6903c7a0c2c09a0e58499b65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2c3004c6903c7a0c2c09a0e58499b65">&#9670;&nbsp;</a></span>m_ros_node</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;rclcpp::Node&gt; ArucoAction::m_ros_node</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1f1e81a094f144892b1db2afe433ca08" name="a1f1e81a094f144892b1db2afe433ca08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f1e81a094f144892b1db2afe433ca08">&#9670;&nbsp;</a></span>m_tf_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;tf2_ros::Buffer&gt; ArucoAction::m_tf_buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afa86d86a97d997a5e2787a840344e727" name="afa86d86a97d997a5e2787a840344e727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa86d86a97d997a5e2787a840344e727">&#9670;&nbsp;</a></span>m_tf_listener</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;tf2_ros::TransformListener&gt; ArucoAction::m_tf_listener</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/cmr_cv/include/cmr_cv/<a class="el" href="aruco__bt__action_8hpp_source.html">aruco_bt_action.hpp</a></li>
<li>src/cmr_cv/src/<a class="el" href="aruco__bt__action_8cpp.html">aruco_bt_action.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 11 2023 14:36:44 for Terra by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
