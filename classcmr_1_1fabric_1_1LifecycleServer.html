<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Terra: cmr::fabric::LifecycleServer&lt; ServerT &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Terra
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecmr.html">cmr</a></li><li class="navelem"><a class="el" href="namespacecmr_1_1fabric.html">fabric</a></li><li class="navelem"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">LifecycleServer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classcmr_1_1fabric_1_1LifecycleServer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cmr::fabric::LifecycleServer&lt; ServerT &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Creates a managed server that can be activated and deactivated.  
 <a href="classcmr_1_1fabric_1_1LifecycleServer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lifecycle__servers_8hpp_source.html">lifecycle_servers.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for cmr::fabric::LifecycleServer&lt; ServerT &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classcmr_1_1fabric_1_1LifecycleServer__inherit__graph.png" border="0" usemap="#acmr_1_1fabric_1_1LifecycleServer_3_01ServerT_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="acmr_1_1fabric_1_1LifecycleServer_3_01ServerT_01_4_inherit__map" id="acmr_1_1fabric_1_1LifecycleServer_3_01ServerT_01_4_inherit__map">
<area shape="rect" title="Creates a managed server that can be activated and deactivated." alt="" coords="9,80,187,121"/>
<area shape="rect" href="classcmr_1_1fabric_1_1GenericLifecycle.html" title="Interface for any LifecycleServer." alt="" coords="5,5,191,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for cmr::fabric::LifecycleServer&lt; ServerT &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classcmr_1_1fabric_1_1LifecycleServer__coll__graph.png" border="0" usemap="#acmr_1_1fabric_1_1LifecycleServer_3_01ServerT_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="acmr_1_1fabric_1_1LifecycleServer_3_01ServerT_01_4_coll__map" id="acmr_1_1fabric_1_1LifecycleServer_3_01ServerT_01_4_coll__map">
<area shape="rect" title="Creates a managed server that can be activated and deactivated." alt="" coords="9,80,187,121"/>
<area shape="rect" href="classcmr_1_1fabric_1_1GenericLifecycle.html" title="Interface for any LifecycleServer." alt="" coords="5,5,191,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a8883fc06f26a802f0c934fab5bfbc39f"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a8883fc06f26a802f0c934fab5bfbc39f">config_t</a> = typename ServerT::config_t</td></tr>
<tr class="separator:a8883fc06f26a802f0c934fab5bfbc39f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3f1fc07cc9df42739a35784043ede87c"><td class="memTemplParams" colspan="2">template&lt;typename ErrorCallbackT , typename... CallbackT&gt; </td></tr>
<tr class="memitem:a3f1fc07cc9df42739a35784043ede87c"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a3f1fc07cc9df42739a35784043ede87c">LifecycleServer</a> (rclcpp_lifecycle::LifecycleNode &amp;node_base, ErrorCallbackT &amp;&amp;error_callback, const typename ServerT::config_t &amp;config, CallbackT &amp;&amp;... callbacks)</td></tr>
<tr class="memdesc:a3f1fc07cc9df42739a35784043ede87c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new Lifecycle Subscription object.  <a href="classcmr_1_1fabric_1_1LifecycleServer.html#a3f1fc07cc9df42739a35784043ede87c">More...</a><br /></td></tr>
<tr class="separator:a3f1fc07cc9df42739a35784043ede87c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1285af7913f57fb75631bd79e1edb3c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a1285af7913f57fb75631bd79e1edb3c3">activate</a> () override</td></tr>
<tr class="memdesc:a1285af7913f57fb75631bd79e1edb3c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activates the Lifecycle Subscription.  <a href="classcmr_1_1fabric_1_1LifecycleServer.html#a1285af7913f57fb75631bd79e1edb3c3">More...</a><br /></td></tr>
<tr class="separator:a1285af7913f57fb75631bd79e1edb3c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c4ca24a21fbd657c36d0d99ddf07cff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a8c4ca24a21fbd657c36d0d99ddf07cff">deactivate</a> () override</td></tr>
<tr class="memdesc:a8c4ca24a21fbd657c36d0d99ddf07cff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deactivates the Lifecycle Subscription.  <a href="classcmr_1_1fabric_1_1LifecycleServer.html#a8c4ca24a21fbd657c36d0d99ddf07cff">More...</a><br /></td></tr>
<tr class="separator:a8c4ca24a21fbd657c36d0d99ddf07cff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4eb225f0e1b58d9d85eba2f3dbaab0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a2e4eb225f0e1b58d9d85eba2f3dbaab0">is_active</a> () const override</td></tr>
<tr class="separator:a2e4eb225f0e1b58d9d85eba2f3dbaab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classcmr_1_1fabric_1_1GenericLifecycle"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classcmr_1_1fabric_1_1GenericLifecycle')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classcmr_1_1fabric_1_1GenericLifecycle.html">cmr::fabric::GenericLifecycle</a></td></tr>
<tr class="memitem:ad91cf28e2e84e16706904d462f6dda5c inherit pub_methods_classcmr_1_1fabric_1_1GenericLifecycle"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1GenericLifecycle.html#ad91cf28e2e84e16706904d462f6dda5c">~GenericLifecycle</a> ()=default</td></tr>
<tr class="separator:ad91cf28e2e84e16706904d462f6dda5c inherit pub_methods_classcmr_1_1fabric_1_1GenericLifecycle"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7302cbec2584d25a6e0d97cf2ad0fddc inherit pub_methods_classcmr_1_1fabric_1_1GenericLifecycle"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1GenericLifecycle.html#a7302cbec2584d25a6e0d97cf2ad0fddc">activate</a> ()=0</td></tr>
<tr class="separator:a7302cbec2584d25a6e0d97cf2ad0fddc inherit pub_methods_classcmr_1_1fabric_1_1GenericLifecycle"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc897a96b5cff2a197af45bc0536a4f2 inherit pub_methods_classcmr_1_1fabric_1_1GenericLifecycle"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1GenericLifecycle.html#acc897a96b5cff2a197af45bc0536a4f2">deactivate</a> ()=0</td></tr>
<tr class="separator:acc897a96b5cff2a197af45bc0536a4f2 inherit pub_methods_classcmr_1_1fabric_1_1GenericLifecycle"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9691763a09856cc8c49caef25a78001 inherit pub_methods_classcmr_1_1fabric_1_1GenericLifecycle"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1GenericLifecycle.html#ab9691763a09856cc8c49caef25a78001">is_active</a> () const =0</td></tr>
<tr class="separator:ab9691763a09856cc8c49caef25a78001 inherit pub_methods_classcmr_1_1fabric_1_1GenericLifecycle"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a1fe45ef1a4aa4b21259c1ba4030054b8"><td class="memTemplParams" colspan="2">template&lt;typename CallbackT , typename ErrorFuncT , typename ReturnT , typename... ArgsT&gt; </td></tr>
<tr class="memitem:a1fe45ef1a4aa4b21259c1ba4030054b8"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a1fe45ef1a4aa4b21259c1ba4030054b8">create_function_wrapper</a> (CallbackT &amp;&amp;callback, ErrorFuncT &amp;&amp;error_cb, std::unique_ptr&lt; std::tuple&lt; ArgsT... &gt; &gt; &amp;&amp;, ReturnT error_val)</td></tr>
<tr class="memdesc:a1fe45ef1a4aa4b21259c1ba4030054b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a callback wrapper that will call the user callback with proper error handling and activation logic.  <a href="classcmr_1_1fabric_1_1LifecycleServer.html#a1fe45ef1a4aa4b21259c1ba4030054b8">More...</a><br /></td></tr>
<tr class="separator:a1fe45ef1a4aa4b21259c1ba4030054b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aca662fc06078b78ac72be84889c79da2"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; typename ServerT::server_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#aca662fc06078b78ac72be84889c79da2">m_sub</a></td></tr>
<tr class="separator:aca662fc06078b78ac72be84889c79da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae18698e9fa37c73bbab8b175393ea9ba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#ae18698e9fa37c73bbab8b175393ea9ba">m_active</a> = false</td></tr>
<tr class="separator:ae18698e9fa37c73bbab8b175393ea9ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44e677f388bfda10ddbbab8d1052b298"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a44e677f388bfda10ddbbab8d1052b298">m_error_count</a> = 0</td></tr>
<tr class="separator:a44e677f388bfda10ddbbab8d1052b298"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90fb94029243629a7e0b20b157971d71"><td class="memItemLeft" align="right" valign="top">std::reference_wrapper&lt; rclcpp_lifecycle::LifecycleNode &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a90fb94029243629a7e0b20b157971d71">m_node</a></td></tr>
<tr class="separator:a90fb94029243629a7e0b20b157971d71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95dc656e6a7fa677385ce11ed825cbf"><td class="memItemLeft" align="right" valign="top">std::function&lt; std::remove_reference_t&lt; decltype(<a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#aca662fc06078b78ac72be84889c79da2">m_sub</a>)&gt;()&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#ae95dc656e6a7fa677385ce11ed825cbf">m_create_sub</a></td></tr>
<tr class="separator:ae95dc656e6a7fa677385ce11ed825cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a6553c3c8508b7cad17c71f35fbf8ff23"><td class="memItemLeft" align="right" valign="top">static constexpr auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a6553c3c8508b7cad17c71f35fbf8ff23">error_threshold</a> = 3</td></tr>
<tr class="memdesc:a6553c3c8508b7cad17c71f35fbf8ff23"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many repeated errors to tolerate before we yell at the user.  <a href="classcmr_1_1fabric_1_1LifecycleServer.html#a6553c3c8508b7cad17c71f35fbf8ff23">More...</a><br /></td></tr>
<tr class="separator:a6553c3c8508b7cad17c71f35fbf8ff23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class ServerT&gt;<br />
class cmr::fabric::LifecycleServer&lt; ServerT &gt;</div><p >Creates a managed server that can be activated and deactivated. </p>
<p >The term server is used to mean something that runs on a ROS executor and invokes user defined callbacks.</p>
<p >Unlike the regular ROS counterparts, the constructor does not start the server. Instead it must be explicitly activated by calling <code><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a1285af7913f57fb75631bd79e1edb3c3" title="Activates the Lifecycle Subscription.">activate()</a></code>. Furthermore, all user-specified callbacks are wrapped in error handling logic so that any uncaught exceptions will cause the error transition to trigger on the <code><a class="el" href="classcmr_1_1fabric_1_1FabricNode.html" title="The FabricNode is the base class for All CMR nodes.">FabricNode</a></code>. The server can be manually deactivated with the <code><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a8c4ca24a21fbd657c36d0d99ddf07cff" title="Deactivates the Lifecycle Subscription.">deactivate()</a></code> method, and you can check the status of a server by querying the <code><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#a2e4eb225f0e1b58d9d85eba2f3dbaab0">is_active()</a></code> method.</p>
<p >When the server is inactive, it will not invoke any user callbacks. It will also not respond to any requests. If an error occurs, then the callback return will be determined by <code>ServerT</code>'s <code>make_return_t</code> type alias.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">ServerT</td><td>The server provider type. This type defines the types <code>server_t</code>, <code>config_t, and</code>make_return_t<code>which are used to create the server and configure it. It also must have a static method</code>make_server<code>that takes a </code>rclcpp_lifecycle::LifecycleNode&amp;<code>, one or more callbacks, and a </code>config_t<code>and returns a</code>server_t<code>. It must satisfy the concept of a </code>ServerPolicy` </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>IsServerPolicy </dd></dl>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a8883fc06f26a802f0c934fab5bfbc39f" name="a8883fc06f26a802f0c934fab5bfbc39f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8883fc06f26a802f0c934fab5bfbc39f">&#9670;&nbsp;</a></span>config_t</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::config_t =  typename ServerT::config_t</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3f1fc07cc9df42739a35784043ede87c" name="a3f1fc07cc9df42739a35784043ede87c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f1fc07cc9df42739a35784043ede87c">&#9670;&nbsp;</a></span>LifecycleServer()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<div class="memtemplate">
template&lt;typename ErrorCallbackT , typename... CallbackT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::LifecycleServer </td>
          <td>(</td>
          <td class="paramtype">rclcpp_lifecycle::LifecycleNode &amp;&#160;</td>
          <td class="paramname"><em>node_base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ErrorCallbackT &amp;&amp;&#160;</td>
          <td class="paramname"><em>error_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const typename ServerT::config_t &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackT &amp;&amp;...&#160;</td>
          <td class="paramname"><em>callbacks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new Lifecycle Subscription object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node_base</td><td>parent node of the subscription. This node <b>MUST OUTLIVE</b> the subscription </td></tr>
    <tr><td class="paramname">topic_name</td><td>name of the topic to subscribe to </td></tr>
    <tr><td class="paramname">qos</td><td>quality of service settings </td></tr>
    <tr><td class="paramname">callback</td><td>callback when a message is received </td></tr>
    <tr><td class="paramname">error_callback</td><td>callback when an error occurs in the subscription callback. For fabric nodes this should probably be <code><a class="el" href="classcmr_1_1fabric_1_1FabricNode.html#a79f1e678292a21ef3d81193928eae896" title="Transitions us to the error state and schedules a restart.">FabricNode::error_transition()</a></code> </td></tr>
    <tr><td class="paramname">options</td><td>optional subscription options </td></tr>
    <tr><td class="paramname">msg_mem_strat</td><td>optional message memory strategy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1285af7913f57fb75631bd79e1edb3c3" name="a1285af7913f57fb75631bd79e1edb3c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1285af7913f57fb75631bd79e1edb3c3">&#9670;&nbsp;</a></span>activate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::activate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Activates the Lifecycle Subscription. </p>
<p >The on message received callback will not be invoked until this is called. </p>

<p>Implements <a class="el" href="classcmr_1_1fabric_1_1GenericLifecycle.html#a7302cbec2584d25a6e0d97cf2ad0fddc">cmr::fabric::GenericLifecycle</a>.</p>

</div>
</div>
<a id="a1fe45ef1a4aa4b21259c1ba4030054b8" name="a1fe45ef1a4aa4b21259c1ba4030054b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fe45ef1a4aa4b21259c1ba4030054b8">&#9670;&nbsp;</a></span>create_function_wrapper()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<div class="memtemplate">
template&lt;typename CallbackT , typename ErrorFuncT , typename ReturnT , typename... ArgsT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::create_function_wrapper </td>
          <td>(</td>
          <td class="paramtype">CallbackT &amp;&amp;&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ErrorFuncT &amp;&amp;&#160;</td>
          <td class="paramname"><em>error_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; std::tuple&lt; ArgsT... &gt; &gt; &amp;&amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ReturnT&#160;</td>
          <td class="paramname"><em>error_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a callback wrapper that will call the user callback with proper error handling and activation logic. </p>
<p >This function takes a unique_ptr to the arguments of the callback for type deduction only. It is expected that a <code>nullptr</code> of the correct type is passed in.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">CallbackT</td><td>type of the user callback </td></tr>
    <tr><td class="paramname">ErrorFuncT</td><td>type of the error callback which is invoked if the user callback throws </td></tr>
    <tr><td class="paramname">ArgsT</td><td>type of the arguments to the user callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>user callback </td></tr>
    <tr><td class="paramname">error_cb</td><td>error callback which is invoked if the user callback throws For fabric nodes this should probably be <code><a class="el" href="classcmr_1_1fabric_1_1FabricNode.html#a79f1e678292a21ef3d81193928eae896" title="Transitions us to the error state and schedules a restart.">FabricNode::error_transition()</a></code> </td></tr>
    <tr><td class="paramname">args_ptr</td><td>unique_ptr to the arguments of the user callback. This is only used for type deduction </td></tr>
    <tr><td class="paramname">error_val</td><td>value to return if the user callback throws or the server is not active </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>callable object that wraps <code>callback</code> </dd></dl>

</div>
</div>
<a id="a8c4ca24a21fbd657c36d0d99ddf07cff" name="a8c4ca24a21fbd657c36d0d99ddf07cff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c4ca24a21fbd657c36d0d99ddf07cff">&#9670;&nbsp;</a></span>deactivate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::deactivate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deactivates the Lifecycle Subscription. </p>
<p >The on message received callback will not be invoked after this is called. </p>

<p>Implements <a class="el" href="classcmr_1_1fabric_1_1GenericLifecycle.html#acc897a96b5cff2a197af45bc0536a4f2">cmr::fabric::GenericLifecycle</a>.</p>

</div>
</div>
<a id="a2e4eb225f0e1b58d9d85eba2f3dbaab0" name="a2e4eb225f0e1b58d9d85eba2f3dbaab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4eb225f0e1b58d9d85eba2f3dbaab0">&#9670;&nbsp;</a></span>is_active()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::is_active </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classcmr_1_1fabric_1_1GenericLifecycle.html#ab9691763a09856cc8c49caef25a78001">cmr::fabric::GenericLifecycle</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6553c3c8508b7cad17c71f35fbf8ff23" name="a6553c3c8508b7cad17c71f35fbf8ff23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6553c3c8508b7cad17c71f35fbf8ff23">&#9670;&nbsp;</a></span>error_threshold</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr auto <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::error_threshold = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>How many repeated errors to tolerate before we yell at the user. </p>

</div>
</div>
<a id="ae18698e9fa37c73bbab8b175393ea9ba" name="ae18698e9fa37c73bbab8b175393ea9ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae18698e9fa37c73bbab8b175393ea9ba">&#9670;&nbsp;</a></span>m_active</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::m_active = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae95dc656e6a7fa677385ce11ed825cbf" name="ae95dc656e6a7fa677385ce11ed825cbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae95dc656e6a7fa677385ce11ed825cbf">&#9670;&nbsp;</a></span>m_create_sub</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::function&lt;std::remove_reference_t&lt;decltype(<a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html#aca662fc06078b78ac72be84889c79da2">m_sub</a>)&gt;()&gt; <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::m_create_sub</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a44e677f388bfda10ddbbab8d1052b298" name="a44e677f388bfda10ddbbab8d1052b298"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44e677f388bfda10ddbbab8d1052b298">&#9670;&nbsp;</a></span>m_error_count</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::m_error_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a90fb94029243629a7e0b20b157971d71" name="a90fb94029243629a7e0b20b157971d71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90fb94029243629a7e0b20b157971d71">&#9670;&nbsp;</a></span>m_node</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::reference_wrapper&lt;rclcpp_lifecycle::LifecycleNode&gt; <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::m_node</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aca662fc06078b78ac72be84889c79da2" name="aca662fc06078b78ac72be84889c79da2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca662fc06078b78ac72be84889c79da2">&#9670;&nbsp;</a></span>m_sub</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ServerT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;typename ServerT::server_t&gt; <a class="el" href="classcmr_1_1fabric_1_1LifecycleServer.html">cmr::fabric::LifecycleServer</a>&lt; ServerT &gt;::m_sub</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/cmr_fabric/include/cmr_fabric/<a class="el" href="lifecycle__servers_8hpp_source.html">lifecycle_servers.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 17 2023 19:06:53 for Terra by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
